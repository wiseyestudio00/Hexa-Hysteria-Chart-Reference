# Table of contents

- [基本規則](#基本規則)
- [音符](#音符)
  - [音符種類](#音符種類)
  - [軌道](#軌道)
  - [格式](#格式)
  - [連續輸入：](#連續輸入)
- [舞台行動](#舞台行動)
  - [模式算式](#模式算式)
  - [攝影機](#攝影機)
  - [更換顏色](#更換顏色)
  - [更換文字](#更換文字)
- [註釋](#註釋)

# 基本規則
1. 所有的時間單位都是`拍子`
2. 音符跟行動可以不照拍子排列，**但我還是建議盡量照順序排，以免混淆**
3. **大小寫沒有區別，大小寫沒有區別，大小寫沒有區別**
4. 不要在同一時間內使用相同的行動

# 音符
最基本的舞台構成。

## 音符種類
類型 | 譜面使用
------------ | -------------
短 | short
滑動 | swipe
連續 | catch
長 | long
連打 | compound

## 軌道
類型 | 譜面使用
------------ | -------------
左上 | lt (left top)
左中 | lc (left center)
左下 | lb (left bottom)
右上 | rt (right top)
右中 | rc (right center)
右下 | rb (right bottom)

## 格式
### 短
打擊點到的時候，需要**點擊**的音符
```
n short rc 0
```
打擊點在第零拍，在右中的短音符
### 滑動
打擊點到的時候，需要**滑動**的音符
```
n swipe in rt 0
```
打擊點在第零拍，在右上的向內滑動音符
```
n swipe out rc 10
```
打擊點在第十拍，在右中的向外滑動音符
### 連續
打擊點到的時候，**不需要點擊，只需要有按著軌道** 的音符
```
n catch rc 0
```
打擊點在第零拍，在右中的連續音符
### 長
打擊點到的時候，需要 **點擊，並且按住軌道，直到結束** 的音符
```
n long lb 0 10
```
打擊在第零拍開始，在第十拍結束，在左下的長音符
### 連打
打擊點開始到結束時，需要**點擊至少特定次數**的音符
```
n compound lc 0 10 12
```
打擊在第零拍開始，第十拍結束，需要打12次的連打音符

## 連續輸入：
你可以同時輸入很多軌道
```
n short rt rc rb 0
```
在右上，右中，右下的第零拍短音符

這樣跟
```
n short rt 0
n short rc 0
n short rb 0
```
的效果一樣，只是可以少三行

## 音符判定
### 基本判定
遊戲內判定音符的打擊，是用秒數來計算的。

判定 | 秒數
------------ | -------------
打擊差 < 0.07秒 | Perfect
0.07秒 < 打擊差 < 0.14秒 | Great
0.14秒 < 打擊差 < 0.21秒 | Good
0.21秒 < 打擊差 < 0.28秒 | Bad
0.28秒 < 打擊差 < 0.35秒 | Miss
0.35秒 < 打擊差 | 如果是提早，無視（不會判定）。<br>如果是晚，則會自動判定Miss

### 一些特殊判定
1. 連續音（catch）的詳細判定規則是：不會被提早判定（即使玩家提早點擊也一樣）。如果是打擊拍到了，軌道有被按著，自動判定perfect。如果是晚按，則會照常判定。
2. 滑動音符（swipe）不需要點擊。判定的唯一標準是滑動。
2. 長音符（long）不需要放開，時間到了會自動判定perfect。玩家也可以提早放開，但是就必須接受判定。
3. 連打音符（compound）如果打擊上限到了，再繼續打擊，也不會發生任何事。

# 舞台行動
現在我有譜面了，但是，只有音符的話，舞台看起來死氣沈沈的。沒有其他指令可以輸入了嗎？

別擔心，你還有`舞台行動`！

舞台行動是給舞台的指示，像是更改字體顏色，旋轉舞台之類的行動。

雖然舞台行動才是譜面的精髓所在⋯⋯
但是！使用它前請務必**仔細地**讀過下面的文字，才不會發生`寫了超過三個小時都做不出自己想要的效果，結果發現根本已經有內建的功能了`的慘劇。

## 模式算式
在開始講述`舞台行動`之前，必須先說一下`模式算式`。

模式算式是非常重要的概念，在使用舞台行動前，請務必讀這一段文字。

`模式算式`指的是`達成目標的速度以及加速度的變化`。

聽起來很複雜嗎？其實就是類似 `y=x^2` 跟 `y=x`的差別。`y=x^2`最高的斜度比較大，但是在`x=1`的時候，`y都等於1`，對吧？

在許多舞台行動中，有很多需要你主動輸入`模式算式`，來讓舞台知道該用什麼`速度及加速度`來完成你需要的行動。

（主要是`有關時間變化的行動`，例如`移動攝影機`，`更換顏色`等等）

例如：

`easeinoutsine`指的就是`慢->快->慢`

`linear`是`平均`

為什麼需要使用`模式算式`？_因為使用它可以為譜面帶來生命力還有精緻感_

如果只使用linear的話，整個譜面會看起來死氣沈沈

實際上很難用言語形容。詳細的畫面可以看看[這個網站](https://easings.net/)還有[3. 範例譜面](https://github.com/wiseyestudio00/Hexa-Hysteria-Chart-Reference/blob/main/%E7%B9%81%E9%AB%94%E4%B8%AD%E6%96%87/3.%E7%AF%84%E4%BE%8B%E8%AD%9C%E9%9D%A2.txt)裡的效果，應該就會明白我的意思了


### 遊戲內建的模式算式列表
```
linear
clerp
spring
easeInQuad
easeOutQuad
easeInOutQuad
easeInCubic
easeOutCubic
easeInOutCubic
easeInQuart
easeOutQuart
easeInOutQuart
easeInQuint
easeOutQuint
easeInOutQuint
easeInSine
easeOutSine
easeInOutSine
easeInExpo
easeOutExpo
easeInOutExpo
easeInCirc
easeOutCirc
easeInOutCirc
easeInBounce
easeOutBounce
easeInOutBounce
easeOutBack
easeInOutBack
easeInElastic
easeOutElastic
easeInOutElastic
```

> 關於這些模式的實際效果，請參考：https://easings.net/

提示：**如果沒辦法決定的話，easeinsine，easeoutsine，easeinoutsine永遠是你的朋友**

## 攝影機
### 旋轉攝影機
旋轉攝影機的角度其實就是旋轉舞台，不過在玩家看來是一模一樣的
#### 格式
```
a changecamera angle 開始拍 執行拍 x角度 y角度 z角度 模式算式
```
#### 示範
```
a changecamera angle 10 2 0 0 60 easeinoutsine
```
在第十拍開始，花兩拍，向z方向旋轉60度，使用easeinoutsine
```
a changecamera angle 0 10 0 0 360 linear
```
在第零拍開始，花十拍，轉360度（一圈），使用linear

#### 詳細解說
雖然三個方位通通都可以旋轉，但是**最有用的是z方位的角度**。轉Z的角度，就是轉圈圈。

從x跟y旋轉會很奇怪，我們的舞台其實是3D的，旋轉的話會變成這樣：

> 向x旋轉30度後的結果

![Move x](https://github.com/wiseyestudio00/Hexa-Hysteria-Chart-Reference/blob/main/pics/2.Reference/Rotatex.png)

> 向Y旋轉30度後的結果

![Move y](https://github.com/wiseyestudio00/Hexa-Hysteria-Chart-Reference/blob/main/pics/2.Reference/Rotatey.png)

雖然比例跑掉了，但舞台會照常運行喔，音符仍然可以被打到。

因此如果你真的心中有使用旋轉x y軸的想法，那還是可以使用。

但是我很不建議：如果你想朝x, y軸旋轉的話，應該要去使用「移動舞台」行動

最後，輸入的角度是`相對位置`，不是`絕對位置`

意思是：

現在舞台是`0 0 30`，輸入`0 0 60`，最後的結果會是`0 0 90`

**如果輸入的執行拍是0的話，會瞬間移動到結束位置**

### 移動攝影機
跟旋轉攝影機一樣，改變的是舞台的大小，但移動的其實是攝影機的位置

#### 格式
```
a changecamera position 開始拍 執行拍 x位置 y位置 z位置 模式算式
```
#### 示範
```
a changecamera position 10 2 0 0 3 easeinoutsine
```
在第十拍，用兩拍的時間，向z方向移動三單位，使用easeinoutsine

#### 解說
跟旋轉舞台一樣，使用的是相對位置

例：
在`0 0 5`的舞台，輸入`0 0 3`後，會到`0 0 8`

跟旋轉舞台一樣，**移動Z是最有效的**。_變的是舞台大小，Z正數是往前（舞台變大），Z負數是往後（舞台變小）_

改變X跟Y會很奇怪

![Move x](https://github.com/wiseyestudio00/Hexa-Hysteria-Chart-Reference/blob/main/pics/2.Reference/Movex.png)

^向X移動三單位後的結果

![Move y](https://github.com/wiseyestudio00/Hexa-Hysteria-Chart-Reference/blob/main/pics/2.Reference/Movey.png)

^向Y移動三單位後的結果

## 更換顏色
你可以更換畫面上的字體跟音符的顏色

### 格式
```
a changecolor 種類 開始拍 執行拍 新顏色 物件列表 模式算式
```

### 顏色格式
`R_G_B_A（紅_綠_藍_透明度）`

每個元素中間要有底線

每項元素的底是0，滿是256

### 解說
關於RGBA，請參考：https://www.colorspire.com/rgb-color-wheel/
（裡面的A=1的時候，是我們A=256的時候）

#### 例
`256_256_256_256	> 全白`

`0_0_0_0		> 透明的黑`


### 種類
#### Text - 文字
物件種類 | 物件列表名稱 | 預設的顏色
------------ | ------------- | -------------
分數 | Score | 0_0_0_255
準確率 | Accuracy | 0_0_0_255
歌名 | SongName | 0_0_0_255
譜面名	| ChartName | 0_0_0_255
作曲者 | Composer | 0_0_0_255
連級數 | Combo | 0_246_255_255

#### UIBackground - 上方的背景
物件種類 | 物件列表名稱 | 預設的顏色
------------ | ------------- | -------------
左上的背景 | lt | 256_256_256_256
右上的背景 | rt |  256_256_256_256

#### Note - 音符
物件種類 | 物件列表名稱 | 預設的顏色
------------ | ------------- | -------------
短音符 | short |  256_256_256_256
長音符 | long |  256_256_256_256
連打 | compound |  256_256_256_256
滑動 | swipe |  0_254_255_255 (向外) <br> 255_1_0_255 (向內)
連續 | catch |  241_146_255_255

#### Trial - 軌道
物件種類 | 物件列表名稱 | 預設的顏色
------------ | ------------- | -------------
左上 | lt | 0_0_0_145
左中 | lc | 0_0_0_145
左下 | lb | 0_0_0_145
右上 | rt | 0_0_0_145
右中 | rc | 0_0_0_145
右下 | rb | 0_0_0_145

#### Trial_Pattern - 軌道上緩緩移動的六角形
跟軌道的物件一樣（rt, lc, lb, rt, rc, rb）<br>
預設顏色：255_255_255_73


#### Hitbox_default - 打擊器，沒有被按住的顏色
跟軌道的物件一樣（rt, lc, lb, rt, rc, rb）<br>
預設顏色：255_255_255_255

#### HitBox_pressed - 打擊器，被按住時的眼色
跟軌道的物件一樣（rt, lc, lb, rt, rc, rb）<br>
預設顏色：120_255_255_255

### 示範
```
a changecolor text 10 2 256_256_256_125 score accuracy easeinoutsine
```
在第十拍時，花兩拍，讓「分數，準確率」變成半透明的白色，使用easinoutsine

## 更換文字
可以更換畫面上字的內容，但是連打次數，分數，準確率不能換（換了也沒有道理）

### 換譜面名稱
#### 格式
```
a ChangeText chartname 開始拍 所需拍 新文字 使用隨機字串
```
#####  示範
```
a changeText chartname 10 1 Extreme true
```
在第十拍時，花一拍，把譜面的名字變成extreme，在途中用隨機文字

### 換歌名
#### 格式
```
a ChangeText SongName 開始拍 所需拍 新文字 使用隨機字
```
#### 示範
```
a ChangeText SongName 10 1 A@Cat's@Song true
```
在第十拍時，花一拍的時間，把歌名換成 A Cat’s Song，使用隨機文字

### 換作曲家
#### 格式
```
a ChangeText Composer 開始拍 所需拍 新文字 使用隨機字串
```
#### 示範
```
a ChangeText Composer 10 1 Etika true
```
在第十拍時，花一拍的時間，把作曲家換成etika，使用隨機文字

### 說明
如果不使用隨機文字，字在途中就不會變

例：
`a changetext composer 10 1 false`

`a changetext composer 11 0 false`

效果一模一樣

隨機文字會是亂碼（像`(+_(d3@!?><`之類的），實際效果請自己試試看

**如果想要更換的文字內有空格，請用@取代**，否則會有錯誤

`Hello World -> Hellow@World`

`I love you -> I@love@you`

# 註釋
有時候，你可能會希望一些字可以被忽視掉。

```
比如說，當你想要寫註釋的時候：
# 進副歌 <-這個
n short rc 150
```

```
# 三個鼓拍 <-這個
n swipe out rc 151
n swipe in rc 152
n swipe out rc 153
```

⋯⋯等等情況
好消息是，`只要你的開頭不是n或是a的行數，都不會被讀進譜面。他們可以當作註釋使用`

```
例如：
n short rc 150
這句話就是註釋，對譜面沒有影響
n short rc 151
```

還有些時候，你可能會希望能暫時忽略掉很多的行數⋯⋯

那麼，你可以用`/*`跟`*/`

在`/*`之下的行數，直到`*/`之前，都不會被讀進譜面中。

```
例如：
/*
n short rc 0	這些音符
n long rc 0 3	通通
n short rc 3	不會被讀進去
*/

//但是，下面這句會被讀進譜面
n short rc 4
```

還有一點，無字的行數也不會被讀進去

```
例如：
//下面這一行會被讀進去
n short rc 0




//雖然上面空了很多行，但是下面這個音符還是會被讀進去
n short rc 1
```

### 禁止的案例
```
n short rc 0 //這是第一拍（錯誤的理由：註釋不能跟行動還有音符在同一行）
 n short rc 1（錯誤的理由：不能用空白當作註釋的開頭）
```
